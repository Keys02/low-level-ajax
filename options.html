<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href=""><link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABC AIAAACQd1PeAAAADElEQVQI12P4//8/AAX+Av7czFnnAAAAAElFTkSuQmCC">
    <style>
        body {
            font-family: poppins, Helvetica, sans-serif;
            background-color: #efefef;
        }
    </style>
</head>
<body>
    <h1>Using Ajax and XML</h1>
    <form>
        <select size="1" id="options-list" onchange="setOption()">
            <option>Select color scheme</option>
            <option>tomato</option>
            <option>purple</option>
            <option>green</option>
        </select>
        <input type="button" value="Use color scheme 1" onclick="getOptions('options1.php')">
        <input type="button" value="Use color scheme 2" onclick="getOptions('options2.php')">
    </form>

    <div class="color-me">This is the text to be colored</div>
    <script>
        let xhr

        if (window.XMLHttpRequest) {
            xhr = new XMLHttpRequest()
        } else if (windows.XActiveObject) {
            xhr = new XActiveObject()
        }

        let options      
        let optionsList = document.querySelector('#options-list')
       
        let listOptions = () => { 
            for (let i = 0; i < options.length; i++) {
               let option = document.createElement('option')
               option.innerHTML = options[i].innerHTML
               optionsList.appendChild(option)
            }
        } 

        let getOptions = (xmlSource) => {

            xhr.open("GET", xmlSource, true)

            xhr.addEventListener("readystatechange", () =>  {
            
            if (xhr.readyState === 4 && xhr.status === 200) {
                let xmlDocument = xhr.responseXML
                options = xmlDocument.getElementsByTagName("option") //Returns HTML collection
                optionsList.innerHTML = ""
                listOptions()
            }
           })
           
           xhr.send(null)
        }

        let setOption = () => {
            let selectedOption = document.querySelector('#options-list').selectedIndex        
            let colorMeText = document.querySelector('.color-me')
            let allOptions = optionsList.children;
            if (selectedOption !== 0) {
                colorMeText.style.color = allOptions[selectedOption].innerHTML;
            }
        }
    </script> 
</body>
</html>
